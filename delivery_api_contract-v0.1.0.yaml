openapi: 3.0.3
info:
  title: Swagger Petstore - OpenAPI 3.0
  description: |-
    This is a contract api to describe the resources available by the Product API
  termsOfService: http://swagger.io/terms/
  contact:
    email: luizcantrella@swagger.io
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.11
externalDocs:
  description: Find out more about Swagger
  url: http://swagger.io
servers:
  - url: https://localhost:8080/api-delivery/v1
tags:
  - name: delivery
    description: Everything about your Delivery
paths:
  /delivery:
    post:
      tags:
        - delivery
      summary: Create a new delivery
      description: Create a new delivery
      operationId: addDelivery
      requestBody:
        description: Create a new delivery
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeliveryRequestDTO'
        required: true
      responses:
        '201':
          description: Delivery created successfully
          headers:
            Location:
              schema:
                type: string
              description: The URL of the created resource
              example: http://deliveryapi.com/api/v1/deliverys/10
        '404':
          description: address not found
        '405':
          description: Invalid input
    get:
      tags:
        - delivery 
      summary: List all deliveries
      description: List all deliveries
      operationId: listAllDelivery
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageableDelivery'
  /delivery/{deliveryId}:
    patch:
      tags:
        - delivery
      summary: Update delivery status
      description: Update delivery status
      operationId: updateDelivery
      parameters:
        - name: deliveryId
          in: path
          description: Id of delivery to update
          required: true
          schema:
            type: integer
            format: int64 
      requestBody:
        description: Update delivery status
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StatusDTO'
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeliveryResponseDTO'
    get:
      tags:
        - delivery
      summary: Get a delivery
      description: Get a delivery
      operationId: getDelivery
      parameters:
        - name: deliveryId
          in: path
          description: Id of delivery to update
          required: true
          schema:
            type: integer
            format: int64 
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeliveryResponseDTO'
components:
  schemas:
    Id:
      type: integer
      format: int64
    AddressDTO:
      required:
        - street
        - number
        - postalCode
        - complement
        - state
        - city
        - country
      type: object
      properties:
        street:
          type: string
          description: The name of street in the address
          example: Groove St.
        number:
          type: integer
          description: The number of the address
          example: 1234
        postalCode:
          type: integer
          description: Postal Code of the address
          example: 12345678
        complement:
          type: string
          description: Complement of the address
          example: Back house
        state:
          type: string
          description: State of the address
          example: SÃ£o paulo
        city:
          type: string
          description: City of the address
          example: Araraquara
        country:
          type: string
          description: Country of the address
          example: Brazil  
    DeliveryRequestDTO:
      type: object
      properties:
        orderId:
          type: integer
          format: int64
        address:
          $ref: '#/components/schemas/AddressDTO'
    SimpleDeliveryResponseDTO:
      type: object
      properties:
        deliveryId:
          type: integer
          format: int64
        orderId:
          type: integer
          format: int64
        status:
          type: string
    StatusDTO:
      type: object
      properties:
        newStatus:
          type: string
    DeliveryResponseDTO:
      allOf:
        - $ref: '#/components/schemas/SimpleDeliveryResponseDTO'
        - type: object
          properties:
            address:
              $ref: '#/components/schemas/AddressDTO'
    PageableTemplate:
      description: Pageable template
      type: object
      properties:
        'pageable':
          type: object
          properties:
            'moreElements':
              type: boolean
              description: Has more elements that were not returned
            'pageNumber':
              type: integer
              format: int64
          required:
            - 'moreElements'
        'content':
          type: array
          minItems: 0
          maxItems: 50
          items:
            type: object
      required:
        - 'pageable'
        - 'content'
    PageableDelivery:
      description: A pageable of deliveries
      allOf:
        - $ref: '#/components/schemas/PageableTemplate'
        - type: object
          properties:
            'content':
              type: array
              items:
                allOf:
                  - $ref: '#/components/schemas/SimpleDeliveryResponseDTO'
                  - type: object
                    required:
                      - deliveryId
                      - orderId
                      - status
                  
                                 
                  
    

            
                      
      
      
                        